global:
  resolve_timeout: 5m

route:
  group_by: ['alertname', 'severity']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 4h
  receiver: 'discord_webhook'
  routes:
    - match:
        severity: critical
      receiver: 'discord_webhook'
      group_wait: 10s

receivers:
- name: 'discord_webhook'
  discord_configs:
  - webhook_url: '{{ discord_webhook_url }}'
    send_resolved: true
    title: '{% raw %}{{ template "discord.title" . }}{% endraw %}'
    message: '{% raw %}{{ template "discord.message" . }}{% endraw %}'

templates:
  - '/etc/alertmanager/templates/*.tmpl'
